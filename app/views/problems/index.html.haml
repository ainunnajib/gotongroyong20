-content_for :header do
  %script{src: 'https://maps.googleapis.com/maps/api/js?v=3.exp'}
  -#google.maps.event.addDomListener window, "load", initialize

%div{'ng-app' => 'problemApp', 'ng-controller' => 'IndexProblemController'}
  .row
    .col-md-12
      #map-canvas

  .row
    .col-md-12
      %h2 List of problems

    .col-md-12
      .pull-right
        = link_to new_problem_path, class: 'btn btn-primary' do
          %span.glyphicon.glyphicon-plus
          New Problem

    .col-md-12
      %table.table.table-striped
        %thead
          %tr
            %th Title
            %th Category
            %th Summary
            %th Cause
            %th Symptom
            %th Effect
            %th Urgency
            %th Province
            %th Kabupaten
            %th Kecamatan
            %th Reported by
            %th
            %th

        %tbody
          %tr{'ng-repeat' => 'problem in detailedProblems'}
            -#%td= link_to problem.title, problem}}
            %td
              %a{'ng-href'=>'{{problem.url}}'}
                {{problem.title}}
            %td
              {{problem.category_name}}
            %td
              {{problem.summary}}
            %td
              {{problem.cause}}
            %td
              {{problem.symptom}}
            %td
              {{problem.effect}}
            %td
              {{problem.urgency_name}}
            %td
              {{problem.province_name}}
            %td
              {{problem.kabupaten_name}}
            %td
              {{problem.kecamatan_name}}
            %td
              {{problem.reported_by_name}}
